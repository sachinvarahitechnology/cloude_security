"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.AnswerQuestions = void 0;
const Question_1 = require("../Question");
const Ability_1 = require("./Ability");
/**
 * This {@apilink Ability} enables an {@apilink Actor} to resolve the value of a given {@apilink Answerable}.
 *
 * {@apilink AnswerQuestions} is used internally by {@apilink Actor.answer}, and it is unlikely you'll ever need to use it directly in your code.
 * That is, unless you're building a custom Serenity/JS extension and want to override the default behaviour of the framework,
 * in which case you should check out the [Contributor's Guide](/contributing).
 *
 * @group Abilities
 */
class AnswerQuestions extends Ability_1.Ability {
    constructor(actor) {
        super();
        this.actor = actor;
    }
    answer(answerable) {
        if (AnswerQuestions.isDefined(answerable) && AnswerQuestions.isAPromise(answerable)) {
            return answerable;
        }
        if (AnswerQuestions.isDefined(answerable) && Question_1.Question.isAQuestion(answerable)) {
            return this.answer(answerable.answeredBy(this.actor));
        }
        return Promise.resolve(answerable);
    }
    static isAPromise(v) {
        return Object.prototype.hasOwnProperty.call(v, 'then');
    }
    static isDefined(v) {
        return !(v === undefined || v === null);
    }
}
exports.AnswerQuestions = AnswerQuestions;
//# sourceMappingURL=AnswerQuestions.js.map